// RADS v0.0.2 - Final Validation Test Suite
// Tests all working v0.0.2 features

struct Person {
    str name;
    i32 age;
    i32 score;
}

struct Point {
    i32 x;
    i32 y;
}

// ============================================
// Utility Functions
// ============================================
blast add(a, b) {
    return a + b;
}

blast multiply(a, b) {
    return a * b;
}

blast factorial(n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

blast classify_number(x) {
    if (x < 0) {
        return "negative";
    } elif (x == 0) {
        return "zero";
    } elif (x < 10) {
        return "small positive";
    } else {
        return "large positive";
    }
}

// ============================================
// MAIN TEST
// ============================================
blast main() {
    echo("╔════════════════════════════════════════╗");
    echo("║    RADS v0.0.2 Final Validation Test  ║");
    echo("╚════════════════════════════════════════╝");
    echo("");

    // TEST 1: Negative Numbers
    echo("=== TEST 1: Negative Numbers ===");
    turbo neg1 = -42;
    turbo neg2 = -3.14;
    turbo neg3 = 10 + -5;
    echo("✓ -42 = " + neg1);
    echo("✓ -3.14 = " + neg2);
    echo("✓ 10 + -5 = " + neg3);
    echo("");

    // TEST 2: If/Elif/Else
    echo("=== TEST 2: If/Elif/Else ===");
    echo("✓ classify(-5) = " + classify_number(-5));
    echo("✓ classify(0) = " + classify_number(0));
    echo("✓ classify(7) = " + classify_number(7));
    echo("✓ classify(100) = " + classify_number(100));
    echo("");

    // TEST 3: Structs
    echo("=== TEST 3: Struct Implementation ===");
    turbo Person alice = Person {
        name: "Alice",
        age: 25,
        score: 100
    };
    echo("✓ Created: " + alice.name + ", age " + alice.age);
    echo("✓ Initial score: " + alice.score);

    alice.score = alice.score + 50;
    alice.age = alice.age + 1;
    echo("✓ Updated score: " + alice.score);
    echo("✓ Updated age: " + alice.age);

    turbo Point p = Point { x: -10, y: 20 };
    echo("✓ Point: (" + p.x + ", " + p.y + ")");
    p.x = p.x + 5;
    echo("✓ Moved: (" + p.x + ", " + p.y + ")");
    echo("");

    // TEST 4: String Concatenation
    echo("=== TEST 4: String Concatenation ===");
    turbo s1 = "Hello";
    turbo s2 = "World";
    turbo s3 = s1 + " " + s2;
    echo("✓ String + String: " + s3);

    turbo num = 42;
    echo("✓ String + Number: Answer = " + num);

    turbo chain = "A" + "B" + "C";
    echo("✓ Chain: " + chain);
    echo("");

    // TEST 5: Arrays
    echo("=== TEST 5: Array Methods ===");
    turbo arr = [1, 2, 3];
    echo("✓ Initial length: " + arr.length);
    echo("✓ arr[0] = " + arr[0]);

    arr.push(4);
    arr.push(5);
    echo("✓ After push(4,5): length = " + arr.length);

    turbo popped = arr.pop();
    echo("✓ Popped: " + popped);
    echo("✓ After pop: length = " + arr.length);

    arr[0] = 100;
    echo("✓ arr[0] = 100: " + arr[0]);
    echo("");

    // TEST 6: Loops
    echo("=== TEST 6: Loop Control (Break/Continue) ===");
    turbo count = 0;
    loop (count < 10) {
        if (count == 5) {
            break;
        }
        count = count + 1;
    }
    echo("✓ Break at 5, count = " + count);

    turbo sum = 0;
    turbo j = 0;
    loop (j < 6) {
        j = j + 1;
        if (j == 3) {
            continue;
        }
        sum = sum + j;
    }
    echo("✓ Continue (skip 3): sum = " + sum);
    echo("");

    // TEST 7: Cruise Loops (For-Each)
    echo("=== TEST 7: Cruise (For-Each) Loops ===");
    turbo numbers = [1, 2, 3, 4, 5];
    turbo result = 0;
    cruise (num in numbers) {
        result = result + num;
    }
    echo("✓ Sum of [1,2,3,4,5]: " + result);
    echo("");

    // TEST 8: Functions
    echo("=== TEST 8: Functions & Recursion ===");
    echo("✓ add(10, 20) = " + add(10, 20));
    echo("✓ multiply(7, 8) = " + multiply(7, 8));
    echo("✓ factorial(5) = " + factorial(5));
    echo("✓ add(-10, 5) = " + add(-10, 5));
    echo("");

    // TEST 9: Complex Expressions
    echo("=== TEST 9: Complex Expressions ===");
    turbo expr1 = (5 + 3) * 2 - 1;
    echo("✓ (5+3)*2-1 = " + expr1);

    turbo expr2 = 10 / 2 + 3 * 4;
    echo("✓ 10/2+3*4 = " + expr2);

    turbo expr3 = -5 * 3 + 10;
    echo("✓ -5*3+10 = " + expr3);

    turbo cmp = -10 < -5;
    echo("✓ Negative comparison works");
    echo("");

    // TEST 10: Variables
    echo("=== TEST 10: Variable Types ===");
    turbo inferred = 42;
    turbo i32 explicit_int = 100;
    turbo str explicit_str = "test";
    echo("✓ Type inference: " + inferred);
    echo("✓ Explicit i32: " + explicit_int);
    echo("✓ Explicit str: " + explicit_str);

    turbo mutable = 10;
    mutable = mutable + 5;
    echo("✓ Mutable reassignment: " + mutable);
    echo("");

    // FINAL SUMMARY
    echo("╔════════════════════════════════════════╗");
    echo("║      ✓ ALL v0.0.2 TESTS PASSED ✓      ║");
    echo("╚════════════════════════════════════════╝");
    echo("");
    echo("Features Validated:");
    echo("  ✓ Negative number literals");
    echo("  ✓ If/elif/else statements");
    echo("  ✓ Struct instantiation & member access");
    echo("  ✓ Struct field assignment");
    echo("  ✓ String concatenation");
    echo("  ✓ Array methods (.push, .pop, .length)");
    echo("  ✓ Array indexing & assignment");
    echo("  ✓ Break & continue");
    echo("  ✓ Cruise (for) loops");
    echo("  ✓ Recursive functions");
    echo("  ✓ Complex expressions");
    echo("  ✓ Type inference & explicit types");
    echo("");
    echo("Known Limitations:");
    echo("  ⚠ Logical operators (&&, ||) not yet implemented");
    echo("  ⚠ Struct arrays have memory issues");
    echo("");
}
