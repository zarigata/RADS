# ðŸŒŸ RADS v0.0.9 "NEBULA" Development Plan

**Codename:** `NEBULA` ðŸŒŒ
**Theme:** Expanding the Language Universe - Generics, Pattern Matching, Rich Ecosystem
**Target Release:** ~10 weeks from now
**Status:** Planning Phase

---

## ðŸ§  Brainstorm: Potential v0.0.9 Features

### Priority 1: Core Language Features

| Feature | Description | Difficulty | Impact |
|---------|-------------|------------|--------|
| **Generics/Templates** | `array<T>`, `Map<K,V>`, generic functions | ðŸ”´ Hard | â­â­â­â­â­ |
| **Pattern Matching** | `match x { pattern => action }` | ðŸŸ¡ Medium | â­â­â­â­ |
| **Destructuring** | `let [a, b, ...rest] = arr` | ðŸŸ¡ Medium | â­â­â­â­ |
| **Spread Operator** | `[...arr1, ...arr2]`, `{...obj1, ...obj2}` | ðŸŸ¢ Easy | â­â­â­ |
| **Default Parameters** | `blast foo(x = 10)` | ðŸŸ¢ Easy | â­â­â­ |
| **Named Parameters** | `foo(name: "test", age: 25)` | ðŸŸ¡ Medium | â­â­â­â­ |
| **Optional Chaining** | `user?.profile?.avatar` | ðŸŸ¢ Easy | â­â­â­â­ |
| **Nullish Coalescing** | `x ?? default` | ðŸŸ¢ Easy | â­â­â­ |
| **Operator Overloading** | Define `+`, `-`, etc. for custom types | ðŸŸ¡ Medium | â­â­â­ |
| **Closures** | Proper variable capture | ðŸ”´ Hard | â­â­â­â­â­ |

### Priority 2: Standard Library Expansion

| Module | Functions | Difficulty | Impact |
|--------|-----------|------------|--------|
| **datetime** | now(), format(), parse(), add(), diff() | ðŸŸ¡ Medium | â­â­â­â­â­ |
| **regex** | match(), search(), replace(), split() | ðŸŸ¡ Medium | â­â­â­â­â­ |
| **http/client** | get(), post(), put(), delete(), headers | ðŸŸ¡ Medium | â­â­â­â­ |
| **crypto** | sha256(), md5(), hmac(), random_bytes() | ðŸŸ¡ Medium | â­â­â­â­ |
| **compress** | gzip(), gunzip(), zlib(), base64() | ðŸŸ¢ Easy | â­â­â­ |
| **cli** | args(), flags(), interactive() | ðŸŸ¢ Easy | â­â­â­â­ |
| **env** | get(), set(), list(), paths() | ðŸŸ¢ Easy | â­â­â­ |
| **process** | spawn(), kill(), wait(), pid() | ðŸŸ¡ Medium | â­â­â­ |
| **json/stream** | Streaming parser for large files | ðŸŸ¡ Medium | â­â­â­ |
| **csv** | parse(), stringify(), stream() | ðŸŸ¢ Easy | â­â­â­ |

### Priority 3: Developer Experience

| Feature | Description | Difficulty | Impact |
|---------|-------------|------------|--------|
| **Better Errors** | Colored output, suggestions, source context | ðŸŸ¢ Easy | â­â­â­â­â­ |
| **Source Maps** | Debug compiled code | ðŸŸ¡ Medium | â­â­â­ |
| **Watch Mode** | Auto-rebuild on file change | ðŸŸ¢ Easy | â­â­â­â­ |
| **Test Framework** | Built-in test runner, assertions, coverage | ðŸŸ¡ Medium | â­â­â­â­â­ |
| **Doc Generator** | Extract docs from comments | ðŸŸ¡ Medium | â­â­â­ |
| **Formatter** | `rads fmt file.rads` | ðŸŸ¡ Medium | â­â­â­â­ |
| **Linter** | `rads lint file.rads` | ðŸŸ¡ Medium | â­â­â­â­ |

### Priority 4: Performance

| Feature | Description | Difficulty | Impact |
|---------|-------------|------------|--------|
| **JIT Improvements** | Better optimization passes | ðŸ”´ Hard | â­â­â­â­â­ |
| **GC Tuning** | Generational, incremental | ðŸŸ¡ Medium | â­â­â­â­ |
| **SIMD** | Vector operations | ðŸ”´ Hard | â­â­â­ |
| **Thread Pool** | Built-in worker pool | ðŸŸ¡ Medium | â­â­â­ |
| **Memory Pools** | Arena allocation | ðŸŸ¡ Medium | â­â­â­ |

### Priority 5: Interoperability

| Feature | Description | Difficulty | Impact |
|---------|-------------|------------|--------|
| **Enhanced FFI** | Struct passing, callbacks | ðŸŸ¡ Medium | â­â­â­â­ |
| **Python Bindings** | Call Python from RADS | ðŸŸ¡ Medium | â­â­â­â­ |
| **Node.js Module** | Native Node.js addon | ðŸŸ¡ Medium | â­â­â­ |
| **Shared Libraries** | Load .so/.dylib/.dll | ðŸŸ¡ Medium | â­â­â­â­ |

### Priority 6: Platform Support

| Platform | Status | Difficulty | Impact |
|----------|--------|------------|--------|
| **Windows** | Basic support | ðŸŸ¡ Medium | â­â­â­â­â­ |
| **macOS** | Works, needs testing | ðŸŸ¢ Easy | â­â­â­â­ |
| **WebAssembly** | Experimental | ðŸ”´ Hard | â­â­â­â­ |
| **Android** | NDK support | ðŸ”´ Hard | â­â­ |
| **iOS** | Not started | ðŸ”´ Hard | â­â­ |

---

## ðŸ“‹ Recommended v0.0.9 Scope

Based on impact vs effort, here's the recommended scope:

### Phase 1: Core Language (Weeks 1-3)

#### 1.1 Destructuring Assignment âœ… HIGH PRIORITY
```rads
// Array destructuring
let [a, b, c] = [1, 2, 3];
let [first, ...rest] = arr;
let [x, , z] = [1, 2, 3];  // Skip element

// Struct destructuring
let { name, age } = person;
let { name: n, age: a = 0 } = person;  // Rename + default
```

**Files:**
- `lexer.c` - No changes needed
- `parser.c` - Add pattern parsing
- `interpreter.c` - Add pattern evaluation

**Estimated effort:** 3-4 days

#### 1.2 Spread Operator âœ… HIGH PRIORITY
```rads
// Array spread
let combined = [...arr1, ...arr2];
let with_extra = [...arr, 4, 5];

// Struct spread
let updated = { ...person, age: 30 };
```

**Estimated effort:** 2-3 days

#### 1.3 Default Parameters âœ… HIGH PRIORITY
```rads
blast greet(name = "World") {
    echo("Hello, " + name + "!");
}

greet();       // "Hello, World!"
greet("RADS"); // "Hello, RADS!"
```

**Estimated effort:** 1-2 days

#### 1.4 Optional Chaining âœ… HIGH PRIORITY
```rads
// Safe property access
let avatar = user?.profile?.avatar;
let first = arr?[0];
```

**Estimated effort:** 2-3 days

#### 1.5 Nullish Coalescing âœ… HIGH PRIORITY
```rads
let value = x ?? "default";  // Only if null/undefined
let value2 = x || "default"; // If falsy (current behavior)
```

**Estimated effort:** 1 day

### Phase 2: Standard Library (Weeks 4-6)

#### 2.1 datetime Module âœ… HIGH PRIORITY
```rads
import datetime;

let now = datetime.now();
echo(now.format("YYYY-MM-DD HH:mm:ss"));

let parsed = datetime.parse("2024-01-15", "YYYY-MM-DD");
let tomorrow = now.add(days: 1);
let diff = now.diff(tomorrow);  // Duration
```

**Functions:**
- `datetime.now()` - Current timestamp
- `datetime.format(ts, fmt)` - Format timestamp
- `datetime.parse(str, fmt)` - Parse string to timestamp
- `datetime.add(ts, days, hours, minutes)` - Add time
- `datetime.diff(ts1, ts2)` - Time difference
- `datetime.unix(ts)` - Unix timestamp
- `datetime.from_unix(unix)` - From Unix

**Estimated effort:** 4-5 days

#### 2.2 regex Module âœ… HIGH PRIORITY
```rads
import regex;

let pattern = regex.compile("\\d+");
if (regex.match(pattern, "123")) {
    echo("Found numbers!");
}

let matches = regex.findall(pattern, "abc123def456");
// ["123", "456"]

let replaced = regex.replace(pattern, "abc123", "X");
// "abcX"
```

**Functions:**
- `regex.compile(pattern)` - Compile regex
- `regex.match(regex, str)` - Boolean match
- `regex.findall(regex, str)` - All matches
- `regex.search(regex, str)` - First match
- `regex.replace(regex, str, replacement)` - Replace
- `regex.split(regex, str)` - Split by pattern

**Estimated effort:** 3-4 days

#### 2.3 Enhanced HTTP Client âœ… HIGH PRIORITY
```rads
import http;

// Simple GET
let response = http.get("https://api.example.com/data");

// With options
let response = http.get("https://api.example.com/data", {
    headers: { "Authorization": "Bearer token" },
    timeout: 5000
});

// POST JSON
let response = http.post("https://api.example.com/create", {
    json: { name: "Test" }
});

// Response
echo(response.status);   // 200
echo(response.headers);  // { content-type: "application/json" }
echo(response.body);     // Response text
```

**Functions:**
- `http.get(url, options)`
- `http.post(url, options)`
- `http.put(url, options)`
- `http.delete(url, options)`
- `http.request(method, url, options)`

**Estimated effort:** 3-4 days

#### 2.4 cli Module (Argument Parsing)
```rads
import cli;

let args = cli.parse({
    name: { type: "string", required: true },
    count: { type: "int", default: 1 },
    verbose: { type: "bool", alias: "v" }
});

echo(args.name);     // String
echo(args.count);    // Int
echo(args.verbose);  // Bool
```

**Functions:**
- `cli.parse(spec)` - Parse command line args
- `cli.args()` - Raw arguments
- `cli.flags()` - Boolean flags only
- `cli.interactive()` - Interactive prompt

**Estimated effort:** 2-3 days

#### 2.5 env Module
```rads
import env;

let home = env.get("HOME");
env.set("MY_VAR", "value");
let all = env.list();
```

**Estimated effort:** 1 day

### Phase 3: Developer Experience (Weeks 7-8)

#### 3.1 Test Framework âœ… HIGH PRIORITY
```rads
import test;

test.describe("Math operations", blast() {
    test.it("should add numbers", blast() {
        test.expect(1 + 1).toBe(2);
    });
    
    test.it("should handle async", blast(done) {
        async_delay(100, blast() {
            test.expect(true).toBe(true);
            done();
        });
    });
});

test.run();
```

**Functions:**
- `test.describe(name, fn)` - Test suite
- `test.it(name, fn)` - Test case
- `test.expect(value)` - Assertion
- `test.expect(val).toBe(expected)` - Strict equality
- `test.expect(val).toEqual(expected)` - Deep equality
- `test.expect(val).toThrow()` - Exception expected
- `test.beforeEach(fn)` - Setup
- `test.afterEach(fn)` - Teardown
- `test.run()` - Execute tests
- `test.skip(name, fn)` - Skip test
- `test.only(name, fn)` - Run only this test

**Estimated effort:** 5-6 days

#### 3.2 Better Error Messages
```rads
// Current:
Error: Undefined variable 'x'

// Improved:
Error: Undefined variable 'x'
  --> Line 5, Column 8
   5 |     echo(x);
     |          ^
   = help: Did you mean 'xs'? (declared on line 3)
   = note: Variables must be declared before use
```

**Features:**
- Colored output
- Source code context
- Spell check suggestions
- Error codes (E001, E002...)
- Link to documentation

**Estimated effort:** 3-4 days

#### 3.3 Watch Mode
```bash
rads --watch program.rads
# Automatically re-runs when file changes
```

**Estimated effort:** 1-2 days

### Phase 4: Polish & Release (Weeks 9-10)

#### 4.1 Performance Benchmarking
- Create benchmark suite
- Profile hot paths
- Optimize critical functions
- Document performance characteristics

#### 4.2 Documentation
- Update README
- Write migration guide from v0.0.8
- Create API reference
- Add more examples

#### 4.3 Final Testing
- All tests pass
- Cross-platform testing
- Stress testing
- Memory leak checking

---

## ðŸ—“ï¸ 10-Week Timeline

| Week | Focus | Deliverables |
|------|-------|--------------|
| **1** | Destructuring | Array/struct destructuring |
| **2** | Spread + Defaults | Spread operator, default params |
| **3** | Optional Chaining | `?.` and `??` operators |
| **4** | datetime module | Full date/time support |
| **5** | regex module | Pattern matching |
| **6** | HTTP + CLI | HTTP client, arg parsing |
| **7** | Test Framework | Built-in testing |
| **8** | Error Messages | Better diagnostics |
| **9** | Watch Mode + Polish | Developer tools |
| **10** | Testing + Release | Final QA, release |

---

## ðŸ“‹ Success Criteria

### Must Have âœ…
- [ ] Destructuring assignment works
- [ ] Spread operator for arrays and structs
- [ ] Default function parameters
- [ ] Optional chaining (`?.`)
- [ ] Nullish coalescing (`??`)
- [ ] datetime module with formatting
- [ ] regex module with basic operations
- [ ] Test framework with assertions
- [ ] All existing tests still pass

### Should Have â­
- [ ] Enhanced HTTP client
- [ ] CLI argument parsing
- [ ] Watch mode
- [ ] Better error messages

### Nice to Have ðŸ’­
- [ ] env module
- [ ] crypto basics
- [ ] Performance improvements

---

## ðŸš« Deferred to v0.1.0

These features are too complex for v0.0.9:

| Feature | Reason |
|---------|--------|
| Generics | Requires major type system work |
| Pattern Matching | Complex parser/interpreter changes |
| Full Closures | Memory management implications |
| SIMD | Platform-specific, complex |
| WebAssembly | Full compiler backend needed |
| Windows Support | Significant platform work |

---

## ðŸ“ New Files to Create

```
src/
â”œâ”€â”€ stdlib/
â”‚   â”œâ”€â”€ stdlib_datetime.c
â”‚   â”œâ”€â”€ stdlib_datetime.h
â”‚   â”œâ”€â”€ stdlib_regex.c
â”‚   â”œâ”€â”€ stdlib_regex.h
â”‚   â”œâ”€â”€ stdlib_cli.c
â”‚   â”œâ”€â”€ stdlib_cli.h
â”‚   â”œâ”€â”€ stdlib_env.c
â”‚   â””â”€â”€ stdlib_env.h
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ test_runner.c
â”‚   â””â”€â”€ test_runner.h
tests/
â”œâ”€â”€ test_destructuring.rads
â”œâ”€â”€ test_spread.rads
â”œâ”€â”€ test_defaults.rads
â”œâ”€â”€ test_optional_chaining.rads
â”œâ”€â”€ test_datetime.rads
â”œâ”€â”€ test_regex.rads
â””â”€â”€ test_v0.0.9.rads
docs/
â”œâ”€â”€ v0.0.9-migration.md
â””â”€â”€ api-reference.md
```

---

## ðŸŽ¯ Estimated Effort Summary

| Category | Effort | Priority |
|----------|--------|----------|
| Destructuring | 3-4 days | P0 |
| Spread Operator | 2-3 days | P0 |
| Default Params | 1-2 days | P0 |
| Optional Chaining | 2-3 days | P0 |
| Nullish Coalescing | 1 day | P0 |
| datetime Module | 4-5 days | P0 |
| regex Module | 3-4 days | P0 |
| HTTP Client | 3-4 days | P1 |
| CLI Parsing | 2-3 days | P1 |
| Test Framework | 5-6 days | P0 |
| Error Messages | 3-4 days | P1 |
| Watch Mode | 1-2 days | P1 |
| **Total** | **~35-45 days** | |

---

## ðŸ’¡ Innovation Ideas (Future Consideration)

### Pipe Operator
```rads
let result = data
    |> filter(x => x > 5)
    |> map(x => x * 2)
    |> reduce((a, b) => a + b, 0);
```

### Struct Composition
```rads
struct Person { name: str, age: int }
struct Employee < Person { department: str, salary: float }
```

### Async/Await Syntax
```rads
blast async fetch_data() {
    let response = await http.get(url);
    return response.json();
}
```

### Macros
```rads
macro log(msg) {
    console.log(`[${__FILE__}:${__LINE__}] ${msg}`);
}
```

### Type Guards
```rads
blast is_string(val) -> val is str {
    return typeof val == "string";
}
```

---

**Created:** February 17, 2026
**Status:** Ready for Review
**Next Step:** Choose scope and begin Phase 1

---

*"From SUPERNOVA to NEBULA - The universe expands!"* ðŸŒŒ
